# nanoget and other tools

## Unpacked message

The original sensor is based on an Arduino Nano 33 IoT board and reports
readings from DHT11 sensor and its internal accelerometer.

Example output from the nanoget.py module at the host:
```
pi@vrijdag:~/src/python_junk/nano $ ./nanoget.py
UDP target IP: 192.168.68.67
UDP target port: 2390
message: b'CONNECT\r\n'
ready: b'OK Connected\r\n'
data b"{\xe8\xd2\x0b\r\x03\x00\x00\xf5\x01\x00\x00'\x01\x00\x00<\x0f\x00\x00\xd0\x02\x00\x00\x90\x11\x00\x00" 28
(198371451, 781, 501, 295, 3900, 720, 4496)
```
The fields are:

- the record serial. Generated by the sensor (198371451)
- x acceleration component (781)
- y acceleration component (501)
- z acceleration component (295)
- relative humidity multiplied by 100 in percent (3900)
- ambient temperature multiplied by 100 in C (720)
- ambient temperature multiplied by 100 in F (4496)

## Database

Can be created

    influx -host localhost -execute "CREATE DATABASE komaro"

To verify data after running the script:

	influx -host localhost -database komaro -execute "SELECT * FROM sensor ORDER BY time DESC LIMIT 5"

## Visualisation

	# Plot T/H for the last 7 days
	./plot_sensor.py localhost 7d

	# Plot the entire dataset
	./plot_sensor.py localhost all

	# Plot with moving average window of 20 from a custom measurement
	./plot_sensor.py localhost 7d 20 my_sensor

or use Python notebooks

	python3 -m notebook
